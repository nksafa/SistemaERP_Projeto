<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

<h:head>
    <title>Dashboard - ERP Suplementos</title>
    <h:outputStylesheet name="css/estilo.css" />
</h:head>

<h:body>
    <div class="card">
        <p:toolbar>
            <p:toolbarGroup>
                <span style="font-weight: bold; font-size: 1.5em;">ERP Suplementos</span>
            </p:toolbarGroup>

            <p:toolbarGroup align="right">
                <span style="margin-right: 15px;">
                    Bem-vindo, <h:outputText value="#{loginBean.usuarioLogado.nome}" />!
                </span>
                <p:button value="Sair" outcome="login.xhtml?faces-redirect=true" icon="pi pi-sign-out" styleClass="ui-button-danger" />
            </p:toolbarGroup>
        </p:toolbar>

        <br/>

        <h:panelGroup rendered="#{not empty loginBean.alertasDeEstoque}">
            <p:panel header="⚠️ Atenção: Estoque Baixo!" toggleable="true" styleClass="ui-panel-warning">
                <p>Os seguintes produtos estão abaixo do estoque mínimo:</p>
                <ul>
                    <ui:repeat value="#{loginBean.alertasDeEstoque}" var="produto">
                        <li>
                            <h:outputText value="#{produto.nome} (Estoque atual: #{produto.quantidadeEmEstoque} / Mínimo necessário: #{produto.estoqueMinimo})" />
                        </li>
                    </ui:repeat>
                </ul>
            </p:panel>
        </h:panelGroup>

        <p:panel header="Menu Principal">
            <h:panelGrid columns="4" cellpadding="10">
                <p:button value="Realizar Venda" outcome="realizar-venda.xhtml" icon="pi pi-shopping-cart" />
                <p:button value="Gerenciar Clientes" outcome="gerenciar-clientes.xhtml" icon="pi pi-users" />
                <p:button value="Gerenciar Vendas" outcome="gerenciar-vendas.xhtml" icon="pi pi-list" />

                <p:button value="Gerenciar Produtos" outcome="gerenciar-produtos.xhtml" icon="pi pi-list"
                          rendered="#{loginBean.usuarioLogado.tipo eq 'GERENTE' or loginBean.usuarioLogado.tipo eq 'ADMINISTRADOR'}" />

                <p:button value="Gerenciar Fornecedores" outcome="gerenciar-fornecedores.xhtml" icon="pi pi-users"
                          rendered="#{loginBean.usuarioLogado.tipo eq 'GERENTE' or loginBean.usuarioLogado.tipo eq 'ADMINISTRADOR'}" />

                <p:button value="Gerenciar Categorias" outcome="gerenciar-categorias.xhtml" icon="pi pi-tags"
                          rendered="#{loginBean.usuarioLogado.tipo eq 'GERENTE' or loginBean.usuarioLogado.tipo eq 'ADMINISTRADOR'}" />

                <p:button value="Gerenciar Usuários" outcome="gerenciar-usuarios.xhtml" icon="pi pi-user-edit"
                          rendered="#{loginBean.usuarioLogado.tipo eq 'ADMINISTRADOR'}" />

                <p:button value="Ver Logs (Auditoria)" outcome="ver-logs.xhtml"
                          icon="pi pi-shield" styleClass="ui-button-help rounded-button"
                          rendered="#{loginBean.usuarioLogado.tipo eq 'ADMINISTRADOR'}" />
            </h:panelGrid>
        </p:panel>
    </div>
</h:body>
</html>
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
<h:head>
    <title>Histórico de Vendas</title>
    <h:outputStylesheet name="css/estilo.css" />
</h:head>
<h:body>
    <h1>Histórico de Vendas</h1>
    <h:messages globalOnly="true" infoClass="msg-sucesso" errorClass="msg-erro"/>

    <h:dataTable value="#{historicoVendasBean.historicoVendas}" var="venda" border="1" styleClass="tabela-estilo">
        <h:column>
            <f:facet name="header">ID da Venda</f:facet>
            #{venda.id}
        </h:column>
        <h:column>
            <f:facet name="header">Data</f:facet>
            <h:outputText value="#{venda.dataVenda}">
                <f:convertDateTime pattern="dd/MM/yyyy HH:mm"/>
            </h:outputText>
        </h:column>
        <h:column>
            <f:facet name="header">Funcionário</f:facet>
            #{venda.funcionario.nome}
        </h:column>
        <h:column>
            <f:facet name="header">Total</f:facet>
            R$ <h:outputText value="#{venda.valorTotal}" >
            <f:convertNumber pattern="#,##0.00" />
        </h:outputText>
        </h:column>
        <h:column>
            <f:facet name="header">Forma de Pagamento</f:facet>
            #{venda.formaPagamento}
        </h:column>
        <h:column>
            <f:facet name="header">Ações</f:facet>
            <h:form>
                <h:commandButton value="Remover" action="#{historicoVendasBean.removerVenda(venda.id)}" onclick="return confirm('Tem certeza que deseja remover esta venda?');" />
            </h:form>
        </h:column>
    </h:dataTable>

    <br/>
    <h:button value="Voltar" outcome="gerenciar-vendas.xhtml" />
</h:body>
</html>